#+title:linux第五章学习笔记
#+author: ray
#+date:<2016-03-07 Mon>

* 命令行模式

** 执行命令

+ 第一个被输入的绝对是命令或者是可执行文件
+ linux 环境中大小写字母是不一样的

** 基础命令的操作

+ date  //Mon Mar  7 20:23:11 CST 2016
+ date +%Y/%m/%d  //2016/03/07
+ date +%H:%M //20:24

+ cal //展示当月的日历
+ cal 2009 // 展示2009 年全部的日历
+ cal 10 2009 //展示2009 年10月的日历

+ bc //计算器 ,可以进行基本的四则运算


* linux 的 man page 和 info page

** man page

man 是 manual 的简写。

通过 man date 就可看到 **date** 的相关的所有用法。

在每个查询结果的后面都带着一个数字代号，例如 DATE(1)，这里的每一个代号都有着不同的含义。

|  代号 | 代表内容                                                            |
|-------+---------------------------------------------------------------------|
| **1** | 用户在 shell 环境中可以操作的命令或者可执行文件                     |
|     2 | 系统内核可以调用的函数与工具等                                      |
|     3 | 一些常用的函数(function)与库函数(library),大部分为 C 的函数库(libc) |
|     4 | 设备文件的说明，通常在 /dev 下的文件                                |
| **5** | 配置文件或者是某些文件的格式                                        |
|     6 | 游戏                                                                |
|     7 | 惯例与协议等，例如linux文件系统、网络协议、ASCLL code 等说明        |
| **8** | 系统管理员可用的管理命令                                            |
|     9 | 跟kernel有关的文件                                                        |

+ 可以在查询结果里面 输入 **/**，或者 **?** 来查询关键字
+ 其中 **/** 是向下查询，**?** 是向上查询，用 n 按键 继续向上查询， 用 N 按键继续向下查询。
+ 按 q 离开查询结果页面
+ man -f keyword， -f 命令可以查询出与关键字有关联的信息
+ man -k keyword, -k 命令可以查询出包含 keyword的所有结果。
+ whatis 相当于 man -f, apropos 相当与 man -k, 如果要使用以上两个命令需要用 root 身份运行 makewhatis命令来创建 whatis 数据库。
+ man 命令在使用 linux 的过程中是一个很重要的命令，因为那么多的命令不可能全部都记得住。

** info page

info page 的功能与 man page 的功能大致上是一样的，但是 info page 的格式展示就更加
清晰一点。不同于 man page 的信息展示是 info page将查询结果拆成一个个段落，每个段落是
一个独立的节点(note),各个节点之间可以通过链接来跳转。

在查询结果的第一行，有如下的字段，每个字段的意义如下：

例如 ： File: info.info, Node: Top, Next:Getting Started, Up:(dir)

| 名称 | 意义                                                                                 |
|------+--------------------------------------------------------------------------------------|
| File | 代表这个 info page 的数据是由 info.info文件提供                                      |
| Node | 代表目前这个页面是属于 Top 节点。info.info内含有很多节点，Top 仅仅只是其中的一个节点 |
| Next | 下一个节点的名称是 Getting Started,可以摁 N 到一下个节点去                           |
| Up   | 回到上一层的节点总览，可以摁 U 回到上一层                                              |
| Prev | 前一个节点。第一个节点没有这个字段                                                                    |

其他还有一些有用的文档 都可以在 /usr/share/doc 目录下找的到。

* nano 文本编辑器

nano 是一个很简单的文本编辑器，打开之后快捷键的说明都在底部，可以实时的查看和使用。

* 正确的关机方法

linux 关机与 windows还是有点区别的，因为 linux 是一个多用户的操作系统，贸然的关机可能
会给其他正在使用系统的用户带来影响，严重的可能会造成文件系统的损坏。在关机之前，应该做好以下
的三件事：

+ 观察系统的使用状态
  - 查看有谁在线 who
  - 查看网络的联机状态 netstat -a
  - 查看后台的运行的程序 ps -aux

+ 通知在线用户关机时间

+ 正确的关机 shutdown reboot


在关机重启的过程中，有以下几个比较重要的命令：

+ 数据同步写入磁盘： sync
  这个命令也可以被普通用户使用，能同步的也只有自己权限内的数据
+ 关机命令 shutdown
  这个命令很强大，可以完成很多的工作，如下：
  - 可以选择关机模式：关机、重启、或者进入单人操作模式
  - 可以配置关机时间
  - 可以自定义关机信息
  - 可以仅仅发出警告信息
  - 可以选择是否要 fsck 检查文件系统
  例如：
  #+BEGIN_SRC shell
    # 系统10分钟后关机
    /sbin/shutdown -h 10 'I will shutdown after 10 mins'
  #+END_SRC
  在使用这个命令的时候，务必带上时间参数，要不然会跳到单人维护的登录情况。这个命令还有
  诸多的用法，可以自行通过 man 查询。
+ reboot halt poweroff
  一般来说，熟练使用 shutdown 与 reboot 就够了，完成的效果都差不多。这个关机命令之间
  会进行相互调用来成关机。
+ init
   linux 一共有 7 中运行模式：

   | 等级       | 模式             |
   |------------+------------------|
   | run level0 | 关机             |
   | run level1 | 单用户工作状态   |
   | run level2 | 多用户工作状态   |
   | run level3 | 纯文本模式       |
   | run level4 | 系统未使用       |
   | run level5 | 有图形接口的模式 |
   | run level6 | 重新启动         |

   所以也可以使用 init0 来完成关机。
