#+title: 第十二章 正则表达式与文件格式化处理

* 正则表达式简介

正则表达式就是处理字符串的方法，通过一些特殊符号来达到搜索/删除/取代某特定字符等目的。

常用与系统管理，过滤邮件等功能。

正则表达式分为基础表达式和扩展表达式。

* 基础正则表达式


** 语系对正则表达式的影响
使用正则表达式时，要特别注意系统环境的语系，否则可能出现意想不到的结果。

基础正则表达式的特殊符号:

| 特殊符号  | 代表意义                                                 |
|-----------+----------------------------------------------------------|
| [:alnum:] | 代表英文大小写字节及数字，即 0-9，A-Z，a-z               |
| [:alpha:] | 代表任何英文大小写字节,即 A-Z,a-z                        |
| [:blank:] | 代表空白键与 Tab 这两个键                                |
| [:cntrl:] | 代表键盘上面的控制按键，包括 CR,LF,Tab,Del..等等         |
| [:digit:] | 代表数字 0-9                                             |
| [:graph:] | 除了空白字节（空白键及 Tab键）外的其他所有按键           |
| [:lower:] | 代表小写字节，即 a-z                                     |
| [:print:] | 代表任何可以被打印出来的字节                             |
| [:punct:] | 代表标点符号(punctuation symbol),即 " ' ? ! ; : # $ 等等 |
| [:upper:] | 代表大写字节，即 A-Z                                     |
| [:space:] | 任何会产生空白的字节，包括空白键 Tab CR 等等             |
| [:xdigit:] | 代表16进制的数字类型，包括 0-9，A-F，a-f的数字与字节                         |

** grep的一些进阶选项

| 参数         | 备注                                                                         |
|--------------+------------------------------------------------------------------------------|
| -A           | 后面可加数字，为 after 的意思，除了列出这一行之外，后续的 n 行也列出来       |
| -B           | 后面可以加数字， 为 bofore 的意思，除了列出这一行之外，前面的 n 行也会列出来 |
| --color=auto | 将正确截取的那个数据里列出颜色                                                              |

** 基础正则表达式联系


*** 搜寻特定字符串

#+BEGIN_SRC shell
    grep -n 'the' test.txt
#+END_SRC

*** 利用中括号 [] 来搜索集合字节
利用中括号来搜索出 test 和 taste 这两个单词。

#+BEGIN_SRC shell
   grep -n 't[ae]st' test.txt
#+END_SRC

*** 行首与行尾字节 ^ $

某个字符只在行首出现：

#+BEGIN_SRC shell
  grep -n '^the' test.txt
#+END_SRC

行尾结束为小数点的行：

#+BEGIN_SRC shell
  grep -n '\.$' test.txt
#+END_SRC

寻找出空白行：

#+BEGIN_SRC shell
  grep -n '^$' test.txt
#+END_SRC

任意一个字节 . 与重复字节 *:

 + . : 代表一定有一个任意字节的意思
 + * : 代表 重复钱一个字节， 0 到无穷多次 的意思，是组合形态

找出一个 g??d 四个字节的字符：

#+BEGIN_SRC shell
   grep -n 'g..d' test.txt
#+END_SRC

至少有两个 o 以上的字符串：

#+BEGIN_SRC shell
  grep -n 'ooo*' test.txt
#+END_SRC


限定连续 RE 字符范围 {}

因为 { } 这两个符号在 shell 中有特殊的含义，因此必须使用转义字符。

找到两个 o 的字符串:

#+BEGIN_SRC shell
   grep -n 'o\{2,2\}' test.txt
#+END_SRC

后面一个表示的是范围，表示找出有两个 o 的字符串。
